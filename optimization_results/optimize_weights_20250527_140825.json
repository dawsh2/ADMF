{
  "optimization_type": "ensemble_weights",
  "method": "regime_specific_grid_search",
  "regimes_optimized": 3,
  "regime_weight_results": {
    "default": {
      "best_weights": null,
      "best_score": -Infinity,
      "all_results": [
        {
          "weights": {
            "ma_crossover": 0.25,
            "rsi": 0.25,
            "bb": 0.25,
            "macd": 0.25
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.4,
            "rsi": 0.2,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.4,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.4,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.2,
            "macd": 0.4
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.3,
            "rsi": 0.3,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.3,
            "macd": 0.3
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        }
      ],
      "combinations_tested": 7
    },
    "trending_up": {
      "best_weights": null,
      "best_score": -Infinity,
      "all_results": [
        {
          "weights": {
            "ma_crossover": 0.25,
            "rsi": 0.25,
            "bb": 0.25,
            "macd": 0.25
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.4,
            "rsi": 0.2,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.4,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.4,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.2,
            "macd": 0.4
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.3,
            "rsi": 0.3,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.3,
            "macd": 0.3
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "initial_value": 100000,
            "final_value": 100040.5,
            "total_return": 0.000405,
            "total_return_pct": 0.040499999999999994,
            "realized_pnl": 40.49999999999727,
            "unrealized_pnl": 0.0,
            "num_trades": 1,
            "portfolio_sharpe_ratio": 17.223532719746544,
            "regime_performance": {
              "trending_down": {
                "pnl": 40.49999999999727,
                "commission": 0.0,
                "count": 1,
                "wins": 1,
                "losses": 0,
                "pnl_values": [
                  40.49999999999727
                ],
                "boundary_trade_count": 0,
                "boundary_trades_pnl": 0.0,
                "pure_regime_count": 1,
                "pure_regime_pnl": 40.49999999999727,
                "sharpe_ratio": null,
                "win_rate": 1.0,
                "avg_pnl": 40.49999999999727,
                "std_dev_pnl": 0.0,
                "gross_pnl": 40.49999999999727,
                "net_pnl": 40.49999999999727
              },
              "_boundary_trades_summary": {}
            }
          }
        }
      ],
      "combinations_tested": 7
    },
    "trending_down": {
      "best_weights": null,
      "best_score": -Infinity,
      "all_results": [
        {
          "weights": {
            "ma_crossover": 0.25,
            "rsi": 0.25,
            "bb": 0.25,
            "macd": 0.25
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        },
        {
          "weights": {
            "ma_crossover": 0.4,
            "rsi": 0.2,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.4,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.4,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.2,
            "macd": 0.4
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        },
        {
          "weights": {
            "ma_crossover": 0.3,
            "rsi": 0.3,
            "bb": 0.2,
            "macd": 0.2
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        },
        {
          "weights": {
            "ma_crossover": 0.2,
            "rsi": 0.2,
            "bb": 0.3,
            "macd": 0.3
          },
          "score": -Infinity,
          "trade_count": 1,
          "metrics": {
            "pnl": 40.49999999999727,
            "commission": 0.0,
            "count": 1,
            "wins": 1,
            "losses": 0,
            "pnl_values": [
              40.49999999999727
            ],
            "boundary_trade_count": 0,
            "boundary_trades_pnl": 0.0,
            "pure_regime_count": 1,
            "pure_regime_pnl": 40.49999999999727,
            "sharpe_ratio": null,
            "win_rate": 1.0,
            "avg_pnl": 40.49999999999727,
            "std_dev_pnl": 0.0,
            "gross_pnl": 40.49999999999727,
            "net_pnl": 40.49999999999727
          }
        }
      ],
      "combinations_tested": 7
    }
  },
  "timestamp": "2025-05-27T14:08:25.784525",
  "regime_best_weights": {}
}