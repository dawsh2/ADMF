2025-05-20 13:24:41,496 - PortfolioResetTest - INFO - Starting portfolio reset test
2025-05-20 13:24:41,497 - src.core.config - INFO - SimpleConfigLoader instance 4432769584 creating for config/config.yaml.
2025-05-20 13:24:41,500 - src.core.config - INFO - ConfigLoader 4432769584: Raw configuration data loaded (id: 4386710656): {'system': {'name': 'ADMF-Trader-MVP', 'version': '0.1.0'}, 'logging': {'level': 'INFO'}, 'components': {'dummy_service': {'some_setting': 'Dummy setting'}, 'ensemble_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'rsi_indicator': {'period': 14}, 'rsi_rule': {'oversold_threshold': 30.0, 'overbought_threshold': 70.0, 'weight': 0.4}}, 'regime_adaptive_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'regime_detector_service_name': 'MyPrimaryRegimeDetector', 'regime_params_file_path': 'regime_optimized_parameters.json', 'fallback_to_overall_best': True}, 'data_handler_csv': {'csv_file_path': 'data/SPY_1min.csv', 'symbol': 'SPY', 'timestamp_column': 'timestamp', 'train_test_split_ratio': 0.8, 'open_column': 'Open', 'high_column': 'High', 'low_column': 'Low', 'close_column': 'Close', 'volume_column': 'Volume'}, 'basic_portfolio': {'initial_cash': 100000.0}, 'basic_risk_manager': {'target_trade_quantity': 100}, 'simulated_execution_handler': {'default_quantity': 100, 'commission_per_trade': 0.005, 'commission_type': 'per_share', 'passthrough': False, 'fill_price_logic': 'signal_price'}, 'optimizer': {'strategy_service_name': 'strategy', 'portfolio_service_name': 'portfolio_manager', 'data_handler_service_name': 'data_handler', 'risk_manager_service_name': 'risk_manager', 'execution_handler_service_name': 'execution_handler', 'metric_to_optimize': 'get_final_portfolio_value', 'higher_metric_is_better': True, 'min_trades_per_regime': 5, 'regime_metric': 'sharpe_ratio', 'output_file_path': 'regime_optimized_parameters.json'}, 'MyPrimaryRegimeDetector': {'min_regime_duration': 2, 'indicators': {'rsi_14': {'type': 'rsi', 'parameters': {'period': 14}}, 'atr_20': {'type': 'atr', 'parameters': {'period': 10}}, 'trend_10_30': {'type': 'simple_ma_trend', 'parameters': {'short_period': 5, 'long_period': 20}}}, 'regime_thresholds': {'trending_up_volatile': {'trend_10_30': {'min': 0.02}, 'atr_20': {'min': 0.15}}, 'trending_up_low_vol': {'trend_10_30': {'min': 0.02}, 'atr_20': {'max': 0.15}}, 'ranging_low_vol': {'trend_10_30': {'min': -0.01, 'max': 0.01}, 'atr_20': {'max': 0.12}}, 'trending_down': {'trend_10_30': {'max': -0.01}}, 'oversold_in_uptrend': {'rsi_14': {'max': 40}, 'trend_10_30': {'min': 0.01}}}}}}
2025-05-20 13:24:41,501 - src.core.config - INFO - ConfigLoader 4432769584: Shielded _config_data created (id: 4433246080). Content: {'system': {'name': 'ADMF-Trader-MVP', 'version': '0.1.0'}, 'logging': {'level': 'INFO'}, 'components': {'dummy_service': {'some_setting': 'Dummy setting'}, 'ensemble_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'rsi_indicator': {'period': 14}, 'rsi_rule': {'oversold_threshold': 30.0, 'overbought_threshold': 70.0, 'weight': 0.4}}, 'regime_adaptive_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'regime_detector_service_name': 'MyPrimaryRegimeDetector', 'regime_params_file_path': 'regime_optimized_parameters.json', 'fallback_to_overall_best': True}, 'data_handler_csv': {'csv_file_path': 'data/SPY_1min.csv', 'symbol': 'SPY', 'timestamp_column': 'timestamp', 'train_test_split_ratio': 0.8, 'open_column': 'Open', 'high_column': 'High', 'low_column': 'Low', 'close_column': 'Close', 'volume_column': 'Volume'}, 'basic_portfolio': {'initial_cash': 100000.0}, 'basic_risk_manager': {'target_trade_quantity': 100}, 'simulated_execution_handler': {'default_quantity': 100, 'commission_per_trade': 0.005, 'commission_type': 'per_share', 'passthrough': False, 'fill_price_logic': 'signal_price'}, 'optimizer': {'strategy_service_name': 'strategy', 'portfolio_service_name': 'portfolio_manager', 'data_handler_service_name': 'data_handler', 'risk_manager_service_name': 'risk_manager', 'execution_handler_service_name': 'execution_handler', 'metric_to_optimize': 'get_final_portfolio_value', 'higher_metric_is_better': True, 'min_trades_per_regime': 5, 'regime_metric': 'sharpe_ratio', 'output_file_path': 'regime_optimized_parameters.json'}, 'MyPrimaryRegimeDetector': {'min_regime_duration': 2, 'indicators': {'rsi_14': {'type': 'rsi', 'parameters': {'period': 14}}, 'atr_20': {'type': 'atr', 'parameters': {'period': 10}}, 'trend_10_30': {'type': 'simple_ma_trend', 'parameters': {'short_period': 5, 'long_period': 20}}}, 'regime_thresholds': {'trending_up_volatile': {'trend_10_30': {'min': 0.02}, 'atr_20': {'min': 0.15}}, 'trending_up_low_vol': {'trend_10_30': {'min': 0.02}, 'atr_20': {'max': 0.15}}, 'ranging_low_vol': {'trend_10_30': {'min': -0.01, 'max': 0.01}, 'atr_20': {'max': 0.12}}, 'trending_down': {'trend_10_30': {'max': -0.01}}, 'oversold_in_uptrend': {'rsi_14': {'max': 40}, 'trend_10_30': {'min': 0.01}}}}}}
2025-05-20 13:24:41,501 - src.core.config - INFO - ConfigLoader 4432769584 initialized. Shielded config ready. Loaded from 'config/config.yaml'.
2025-05-20 13:24:41,501 - src.core.container - INFO - DI Container initialized.
2025-05-20 13:24:41,501 - src.core.event_bus - INFO - EventBus initialized.
2025-05-20 13:27:00,868 - PortfolioResetTest - INFO - Starting portfolio reset test
2025-05-20 13:27:00,868 - src.core.config - INFO - SimpleConfigLoader instance 4406932016 creating for config/config.yaml.
2025-05-20 13:27:00,872 - src.core.config - INFO - ConfigLoader 4406932016: Raw configuration data loaded (id: 4388579008): {'system': {'name': 'ADMF-Trader-MVP', 'version': '0.1.0'}, 'logging': {'level': 'INFO'}, 'components': {'dummy_service': {'some_setting': 'Dummy setting'}, 'ensemble_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'rsi_indicator': {'period': 14}, 'rsi_rule': {'oversold_threshold': 30.0, 'overbought_threshold': 70.0, 'weight': 0.4}}, 'regime_adaptive_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'regime_detector_service_name': 'MyPrimaryRegimeDetector', 'regime_params_file_path': 'regime_optimized_parameters.json', 'fallback_to_overall_best': True}, 'data_handler_csv': {'csv_file_path': 'data/SPY_1min.csv', 'symbol': 'SPY', 'timestamp_column': 'timestamp', 'train_test_split_ratio': 0.8, 'open_column': 'Open', 'high_column': 'High', 'low_column': 'Low', 'close_column': 'Close', 'volume_column': 'Volume'}, 'basic_portfolio': {'initial_cash': 100000.0}, 'basic_risk_manager': {'target_trade_quantity': 100}, 'simulated_execution_handler': {'default_quantity': 100, 'commission_per_trade': 0.005, 'commission_type': 'per_share', 'passthrough': False, 'fill_price_logic': 'signal_price'}, 'optimizer': {'strategy_service_name': 'strategy', 'portfolio_service_name': 'portfolio_manager', 'data_handler_service_name': 'data_handler', 'risk_manager_service_name': 'risk_manager', 'execution_handler_service_name': 'execution_handler', 'metric_to_optimize': 'get_final_portfolio_value', 'higher_metric_is_better': True, 'min_trades_per_regime': 5, 'regime_metric': 'sharpe_ratio', 'output_file_path': 'regime_optimized_parameters.json'}, 'MyPrimaryRegimeDetector': {'min_regime_duration': 2, 'indicators': {'rsi_14': {'type': 'rsi', 'parameters': {'period': 14}}, 'atr_20': {'type': 'atr', 'parameters': {'period': 10}}, 'trend_10_30': {'type': 'simple_ma_trend', 'parameters': {'short_period': 5, 'long_period': 20}}}, 'regime_thresholds': {'trending_up_volatile': {'trend_10_30': {'min': 0.02}, 'atr_20': {'min': 0.15}}, 'trending_up_low_vol': {'trend_10_30': {'min': 0.02}, 'atr_20': {'max': 0.15}}, 'ranging_low_vol': {'trend_10_30': {'min': -0.01, 'max': 0.01}, 'atr_20': {'max': 0.12}}, 'trending_down': {'trend_10_30': {'max': -0.01}}, 'oversold_in_uptrend': {'rsi_14': {'max': 40}, 'trend_10_30': {'min': 0.01}}}}}}
2025-05-20 13:27:00,873 - src.core.config - INFO - ConfigLoader 4406932016: Shielded _config_data created (id: 4389123968). Content: {'system': {'name': 'ADMF-Trader-MVP', 'version': '0.1.0'}, 'logging': {'level': 'INFO'}, 'components': {'dummy_service': {'some_setting': 'Dummy setting'}, 'ensemble_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'rsi_indicator': {'period': 14}, 'rsi_rule': {'oversold_threshold': 30.0, 'overbought_threshold': 70.0, 'weight': 0.4}}, 'regime_adaptive_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'regime_detector_service_name': 'MyPrimaryRegimeDetector', 'regime_params_file_path': 'regime_optimized_parameters.json', 'fallback_to_overall_best': True}, 'data_handler_csv': {'csv_file_path': 'data/SPY_1min.csv', 'symbol': 'SPY', 'timestamp_column': 'timestamp', 'train_test_split_ratio': 0.8, 'open_column': 'Open', 'high_column': 'High', 'low_column': 'Low', 'close_column': 'Close', 'volume_column': 'Volume'}, 'basic_portfolio': {'initial_cash': 100000.0}, 'basic_risk_manager': {'target_trade_quantity': 100}, 'simulated_execution_handler': {'default_quantity': 100, 'commission_per_trade': 0.005, 'commission_type': 'per_share', 'passthrough': False, 'fill_price_logic': 'signal_price'}, 'optimizer': {'strategy_service_name': 'strategy', 'portfolio_service_name': 'portfolio_manager', 'data_handler_service_name': 'data_handler', 'risk_manager_service_name': 'risk_manager', 'execution_handler_service_name': 'execution_handler', 'metric_to_optimize': 'get_final_portfolio_value', 'higher_metric_is_better': True, 'min_trades_per_regime': 5, 'regime_metric': 'sharpe_ratio', 'output_file_path': 'regime_optimized_parameters.json'}, 'MyPrimaryRegimeDetector': {'min_regime_duration': 2, 'indicators': {'rsi_14': {'type': 'rsi', 'parameters': {'period': 14}}, 'atr_20': {'type': 'atr', 'parameters': {'period': 10}}, 'trend_10_30': {'type': 'simple_ma_trend', 'parameters': {'short_period': 5, 'long_period': 20}}}, 'regime_thresholds': {'trending_up_volatile': {'trend_10_30': {'min': 0.02}, 'atr_20': {'min': 0.15}}, 'trending_up_low_vol': {'trend_10_30': {'min': 0.02}, 'atr_20': {'max': 0.15}}, 'ranging_low_vol': {'trend_10_30': {'min': -0.01, 'max': 0.01}, 'atr_20': {'max': 0.12}}, 'trending_down': {'trend_10_30': {'max': -0.01}}, 'oversold_in_uptrend': {'rsi_14': {'max': 40}, 'trend_10_30': {'min': 0.01}}}}}}
2025-05-20 13:27:00,873 - src.core.config - INFO - ConfigLoader 4406932016 initialized. Shielded config ready. Loaded from 'config/config.yaml'.
2025-05-20 13:27:00,873 - src.core.container - INFO - DI Container initialized.
2025-05-20 13:27:00,873 - src.core.event_bus - INFO - EventBus initialized.
2025-05-20 13:27:00,873 - component.DataHandler - INFO - Attempting to load specific config for 'DataHandler' using key: '<src.core.container.Container object at 0x106ac7cb0>'
2025-05-20 13:27:00,873 - src.core.config - INFO - ConfigLoader 4406932016: [[[[[ SimpleConfigLoader.get() CALLED for key: '<src.core.container.Container object at 0x106ac7cb0>' (type: <class 'src.core.container.Container'>) ]]]]]
2025-05-20 13:27:00,873 - src.core.config - INFO - ConfigLoader 4406932016: Accessing _config_data (shielded copy, id: 4389123968). Available top-level keys: ['system', 'logging', 'components']
2025-05-20 13:27:00,873 - src.core.config - ERROR - ConfigLoader 4406932016: Unexpected error accessing config key '<src.core.container.Container object at 0x106ac7cb0>': argument of type 'Container' is not iterable
Traceback (most recent call last):
  File "/Users/daws/ADMF/src/core/config.py", line 176, in get
    if '.' not in config_key:
       ^^^^^^^^^^^^^^^^^^^^^
TypeError: argument of type 'Container' is not iterable
2025-05-20 13:27:00,873 - component.DataHandler - WARNING - No specific configuration found for key '<src.core.container.Container object at 0x106ac7cb0>' for component 'DataHandler'. Using empty config. `get` returned None.
2025-05-20 13:27:00,873 - component.DataHandler - INFO - Component 'DataHandler' created. State: CREATED
2025-05-20 13:30:35,962 - PortfolioResetTest - INFO - Starting portfolio reset test
2025-05-20 13:30:35,964 - src.core.config - INFO - SimpleConfigLoader instance 4400624176 creating for config/config.yaml.
2025-05-20 13:30:35,967 - src.core.config - INFO - ConfigLoader 4400624176: Raw configuration data loaded (id: 4374871680): {'system': {'name': 'ADMF-Trader-MVP', 'version': '0.1.0'}, 'logging': {'level': 'INFO'}, 'components': {'dummy_service': {'some_setting': 'Dummy setting'}, 'ensemble_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'rsi_indicator': {'period': 14}, 'rsi_rule': {'oversold_threshold': 30.0, 'overbought_threshold': 70.0, 'weight': 0.4}}, 'regime_adaptive_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'regime_detector_service_name': 'MyPrimaryRegimeDetector', 'regime_params_file_path': 'regime_optimized_parameters.json', 'fallback_to_overall_best': True}, 'data_handler_csv': {'csv_file_path': 'data/SPY_1min.csv', 'symbol': 'SPY', 'timestamp_column': 'timestamp', 'train_test_split_ratio': 0.8, 'open_column': 'Open', 'high_column': 'High', 'low_column': 'Low', 'close_column': 'Close', 'volume_column': 'Volume'}, 'basic_portfolio': {'initial_cash': 100000.0}, 'basic_risk_manager': {'target_trade_quantity': 100}, 'simulated_execution_handler': {'default_quantity': 100, 'commission_per_trade': 0.005, 'commission_type': 'per_share', 'passthrough': False, 'fill_price_logic': 'signal_price'}, 'optimizer': {'strategy_service_name': 'strategy', 'portfolio_service_name': 'portfolio_manager', 'data_handler_service_name': 'data_handler', 'risk_manager_service_name': 'risk_manager', 'execution_handler_service_name': 'execution_handler', 'metric_to_optimize': 'get_final_portfolio_value', 'higher_metric_is_better': True, 'min_trades_per_regime': 5, 'regime_metric': 'sharpe_ratio', 'output_file_path': 'regime_optimized_parameters.json'}, 'MyPrimaryRegimeDetector': {'min_regime_duration': 2, 'indicators': {'rsi_14': {'type': 'rsi', 'parameters': {'period': 14}}, 'atr_20': {'type': 'atr', 'parameters': {'period': 10}}, 'trend_10_30': {'type': 'simple_ma_trend', 'parameters': {'short_period': 5, 'long_period': 20}}}, 'regime_thresholds': {'trending_up_volatile': {'trend_10_30': {'min': 0.02}, 'atr_20': {'min': 0.15}}, 'trending_up_low_vol': {'trend_10_30': {'min': 0.02}, 'atr_20': {'max': 0.15}}, 'ranging_low_vol': {'trend_10_30': {'min': -0.01, 'max': 0.01}, 'atr_20': {'max': 0.12}}, 'trending_down': {'trend_10_30': {'max': -0.01}}, 'oversold_in_uptrend': {'rsi_14': {'max': 40}, 'trend_10_30': {'min': 0.01}}}}}}
2025-05-20 13:30:35,967 - src.core.config - INFO - ConfigLoader 4400624176: Shielded _config_data created (id: 4374871808). Content: {'system': {'name': 'ADMF-Trader-MVP', 'version': '0.1.0'}, 'logging': {'level': 'INFO'}, 'components': {'dummy_service': {'some_setting': 'Dummy setting'}, 'ensemble_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'rsi_indicator': {'period': 14}, 'rsi_rule': {'oversold_threshold': 30.0, 'overbought_threshold': 70.0, 'weight': 0.4}}, 'regime_adaptive_strategy': {'symbol': 'SPY', 'short_window_default': 10, 'long_window_default': 20, 'ma_rule.weight': 0.6, 'regime_detector_service_name': 'MyPrimaryRegimeDetector', 'regime_params_file_path': 'regime_optimized_parameters.json', 'fallback_to_overall_best': True}, 'data_handler_csv': {'csv_file_path': 'data/SPY_1min.csv', 'symbol': 'SPY', 'timestamp_column': 'timestamp', 'train_test_split_ratio': 0.8, 'open_column': 'Open', 'high_column': 'High', 'low_column': 'Low', 'close_column': 'Close', 'volume_column': 'Volume'}, 'basic_portfolio': {'initial_cash': 100000.0}, 'basic_risk_manager': {'target_trade_quantity': 100}, 'simulated_execution_handler': {'default_quantity': 100, 'commission_per_trade': 0.005, 'commission_type': 'per_share', 'passthrough': False, 'fill_price_logic': 'signal_price'}, 'optimizer': {'strategy_service_name': 'strategy', 'portfolio_service_name': 'portfolio_manager', 'data_handler_service_name': 'data_handler', 'risk_manager_service_name': 'risk_manager', 'execution_handler_service_name': 'execution_handler', 'metric_to_optimize': 'get_final_portfolio_value', 'higher_metric_is_better': True, 'min_trades_per_regime': 5, 'regime_metric': 'sharpe_ratio', 'output_file_path': 'regime_optimized_parameters.json'}, 'MyPrimaryRegimeDetector': {'min_regime_duration': 2, 'indicators': {'rsi_14': {'type': 'rsi', 'parameters': {'period': 14}}, 'atr_20': {'type': 'atr', 'parameters': {'period': 10}}, 'trend_10_30': {'type': 'simple_ma_trend', 'parameters': {'short_period': 5, 'long_period': 20}}}, 'regime_thresholds': {'trending_up_volatile': {'trend_10_30': {'min': 0.02}, 'atr_20': {'min': 0.15}}, 'trending_up_low_vol': {'trend_10_30': {'min': 0.02}, 'atr_20': {'max': 0.15}}, 'ranging_low_vol': {'trend_10_30': {'min': -0.01, 'max': 0.01}, 'atr_20': {'max': 0.12}}, 'trending_down': {'trend_10_30': {'max': -0.01}}, 'oversold_in_uptrend': {'rsi_14': {'max': 40}, 'trend_10_30': {'min': 0.01}}}}}}
2025-05-20 13:30:35,968 - src.core.config - INFO - ConfigLoader 4400624176 initialized. Shielded config ready. Loaded from 'config/config.yaml'.
2025-05-20 13:30:35,968 - src.core.container - INFO - DI Container initialized.
2025-05-20 13:30:35,968 - src.core.event_bus - INFO - EventBus initialized.
2025-05-20 13:30:35,968 - component.DataHandler - INFO - Attempting to load specific config for 'DataHandler' using key: 'data_handler_csv'
2025-05-20 13:30:35,968 - src.core.config - INFO - ConfigLoader 4400624176: [[[[[ SimpleConfigLoader.get() CALLED for key: 'data_handler_csv' (type: <class 'str'>) ]]]]]
2025-05-20 13:30:35,968 - src.core.config - INFO - ConfigLoader 4400624176: Accessing _config_data (shielded copy, id: 4374871808). Available top-level keys: ['system', 'logging', 'components']
2025-05-20 13:30:35,968 - src.core.config - INFO - ConfigLoader 4400624176: Processing as TOP-LEVEL key: 'data_handler_csv'
2025-05-20 13:30:35,968 - src.core.config - INFO - ConfigLoader 4400624176: Top-level key 'data_handler_csv' NOT IN _config_data (shielded). Returning default_value.
2025-05-20 13:30:35,968 - component.DataHandler - WARNING - No specific configuration found for key 'data_handler_csv' for component 'DataHandler'. Using empty config. `get` returned None.
2025-05-20 13:30:35,968 - component.DataHandler - INFO - Component 'DataHandler' created. State: CREATED
